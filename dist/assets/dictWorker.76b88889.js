(function(){"use strict";let m=null,u=Symbol("");function n(i){return new Promise(s=>setTimeout(s,i))}onmessage=function(i){if(i.data.command=="init")(async()=>{const s=await fetch("./dict.txt");n(10);const c=await s.text();n(10);const o=c.split(`
`);n(10);let t={};for(let l=0,r=o.length;l<r;l++){let e=o[l],a=e[0];a in t||(t[a]=[]),t[a].push(e),l%3e3===0&&n(1)}m=t,postMessage({message:"completeInit",result:t})})();else if(i.data.command=="analysis"){let s=i.data.text,c=m;if(!c)return;let o=[];for(let t=0,l=s.length;t<l;t++){let r=s[t];if(r<"~")continue;let e=c[r];if(e){e[u]||(e.sort((g,p)=>p.length-g.length),e[u]=!0,n(30));let a=s.substr(t,e[0].length),h=new RegExp(e.join("|")),f=a.match(h);f&&(o.push(f[0]),t+=f[0].length-1)}}postMessage({message:"completeAnalysis",result:o})}}})();
